#php #frontend #backend #javascript #typescript

```php
<?php

$app->get('/photos', function()
{
	$photos = $this->entityManager->getRepository('App\Entity\Photo')->findAll();
	return $this->get('renderer')->render($response, "/photos.phtml", ['photos' => $photos]);
});
```

- Модель предметной области (или просто Модель) описана с помощью ORM (хотя это не обязательно, хранилище - вещь отдельная от модели).
- Функция-обработчик обращается к модель для выполнения запрошенных операций и выводит необходимые данные в шаблон.
- Шаблон описывает представление конкретной страницы и строится на основании данных, переданных из функции-обработчика.

## MVC

такая структура носит гордое имя MVC, или Model-View-Controller (обычно добавляют приписку V2, так как первая версия MVC используется для "толстых клиентов" (когда клиент берет на себя больше сервера))

### M
> Модель предметной области. Ядро приложения. В идеале - чистая бизнес-логика. Ничего не знает о других частях приложения и не может на них влиять.
### V
> Шаблон. Получает данные от обработчиков и иногда от ядра приложения, но такое не приветствуется. И уж точно шаблон не должен знать ничего о базе данных. Этим грешат начинающие разработчики, которые выполняют SQL запросы прямо из шаблонов.
### C
> Наша функция обработчик (в других фреймворках могут быть другие сущности). Использует модель для выполнения запрашиваемых операций и отвечает за генерацию шаблона.

Такая структура разделяет приложение минимум на три слоя, это важно для создания модульных приложений, то-есть таких, которые легко развивать и модифицировать. При этом никто не запрещает добавлять новые и дробить текущие слои, всё это уже зависит от сложности самого приложения.
![[Pasted image 20250907123123.png]]

MVC - архитектурный шаблон (паттерн проектирования). 

[[Шаблон проектирования в разработке]]

Некоторые паттерны - всеобъемлющие, подобные MVC. Они определяют глобальные ограничения, но ничего не говорят о способе реализации. 
В любом случае паттерны - не догма и не формальная спецификация, а значит всегда есть место для самостоятельного набора.

В MVC все связи однонаправленные. Нет двух слоев, которые знают друг о друге одновременно.
Модульность - один из ключевых факторов, делающих приложения по настоящему качественными с точки зрения разработки. Как мы увидим позже, все веб-фреймворки построены именно на модели MVC с небольшими модификациями, не влияющими на ключевую идею.